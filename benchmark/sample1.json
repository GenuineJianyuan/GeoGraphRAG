{
    "query": "Annual burned area analysis",
    "datasource": [
        "MODIS/061/MCD64A1",
        "Administrative vector data"
    ],
    "raw_code": "//table:Upload the henan region of vector data (AdministrativeDivisionsOfHenan.shp)\n// Module 1: Initialization and Parameter Setup\nvar hn = ee.FeatureCollection(table);\nvar inYear = 2022;\nvar inMonth = 1;\nvar durationBA = 12;\nvar startDateBA = ee.Date.fromYMD(inYear, inMonth, 1);\nvar endDateBA = startDateBA.advance(durationBA, 'month');\n\n// Module 2: Load and Process MODIS Burned Area Data\nvar modisBurn = ee.ImageCollection('MODIS/061/MCD64A1')\n                  .filterBounds(hn)\n                  .filterDate(startDateBA, endDateBA)\n                  .select('BurnDate');\n\nvar getBurnMask = function(image) {\n  return image.select('BurnDate').gte(1);\n};\nvar allBurnImg = modisBurn.map(getBurnMask).sum().clip(hn);\nprint('Henan Province ' + inYear + ' Annual burning area image', allBurnImg);\n\n// Module 3: Aggregate Burned Pixels\nvar burnedPixels = ee.Number(allBurnImg.reduceRegion({\n  reducer: ee.Reducer.count(),\n  geometry: hn,\n  scale: 500,\n  maxPixels: 1e12\n}).get('BurnDate'));\nprint('Total number of burned pixels in Henan Province:', burnedPixels);\nvar scale = modisBurn.first().projection().nominalScale();\nprint('Burning pixel resolution (m):', scale);\nvar burnedArea = burnedPixels.multiply(scale).multiply(scale).divide(1000000);\nprint('Henan Province ' + inYear + ' Annual burned area (km²):', burnedArea);\n\n// Module 4: Per-City Burn Analysis\nvar hn_burned = ee.FeatureCollection(hn.map(function(feature) {\n  var city_name = feature.get('ENG_NAME');\n  var burned_pixels = ee.Number(allBurnImg.reduceRegion({\n    reducer: ee.Reducer.count(),\n    geometry: feature.geometry(),\n    scale: 500\n  }).get('BurnDate'));\n  var burned_area = burned_pixels.multiply(scale).multiply(scale).divide(1000000);\n  return ee.Feature(feature.geometry(), {\n    'city_name': city_name,\n    'burned_pixels': burned_pixels,\n    'burned_area': burned_area\n  });\n}));\nprint('Henan Province ' + inYear + ' Annual fire situation vector:', hn_burned);\n\n// Module 5: Visualization of Burned Area\nvar burnedAreaVis = {\n  min: 0.0,\n  max: 50,\n  palette: ['4e0400']\n};\nMap.addLayer(hn_burned, {color:'FFFFFF'}, 'Fire situation in Henan province');\nMap.addLayer(allBurnImg, burnedAreaVis, 'Burned Area');\nMap.centerObject(hn, 7);\n\n// Module 6: Chart Visualization\nvar chart = ui.Chart.feature.byFeature({\n  features: hn_burned,\n  xProperty: 'city_name',\n  yProperties: ['burned_area']\n}).setChartType('PieChart')\n.setOptions({\n  title: 'Henan Province ' + inYear + ' Annual Fire Situation',\n  titleTextStyle: {\n    fontSize: 18,\n    bold: true,\n    textAlign: 'center',\n    color: 'black'\n  },\n  legend: {\n    position: 'right',\n    maxLines: 4,\n    textStyle: {fontSize: 12},\n    spacing: 15\n  },\n  slices: {\n    0: {color: '#FFEDA0'},\n    1: {color: '#FEB24C'},\n    2: {color: '#FD8D3C'},\n    3: {color: '#FC4E2A'},\n    4: {color: '#E31A1C'},\n    5: {color: '#BD0026'},\n    6: {color: '#800026'},\n    7: {color: '#FF8C00'},\n    8: {color: '#FF6347'},\n    9: {color: '#FF4500'},\n    10: {color: '#DC143C'},\n    11: {color: '#B22222'}\n  },\n  width: 1000,\n  height: 400,\n  pieHole: 0.4\n});\nprint(chart);\n\n// Module 7: Raster Visualization\nvar burnedAreaRaster = hn_burned.reduceToImage({\n  properties: ['burned_area'],\n  reducer: ee.Reducer.first()\n}).clip(hn);\nvar burnedAreaRasterVis = {\n  min: 0,\n  max: 119,\n  palette: ['FFFFFF', 'FFEDA0', 'FEB24C', 'FD8D3C', 'FC4E2A', 'E31A1C', 'BD0026', '800026']\n};\nMap.addLayer(burnedAreaRaster, burnedAreaRasterVis, 'City-wise Burned Area (km²)');\n\n// Module 8: Application Title\nMap.add(ui.Label('Analysis of fire situation in Henan Province in 2022', {fontWeight: 'bold', fontSize: '24px'}));",
    "api": [
        "ee.FeatureCollection",
        "ee.Date.fromYMD",
        "ee.ImageCollection.filterBounds",
        "ee.ImageCollection.filterDate",
        "ee.ImageCollection.select",
        "ee.Image.select",
        "ee.Image.gte",
        "ee.ImageCollection.map",
        "ee.Image.sum",
        "ee.Image.clip",
        "ee.Image.reduceRegion",
        "ee.Reducer.count",
        "ee.Number",
        "ee.ImageCollection.first",
        "ee.Projection.nominalScale",
        "ee.Image.multiply",
        "ee.Image.divide",
        "ee.FeatureCollection.map",
        "ee.Feature.geometry",
        "ee.Feature",
        "Map.addLayer",
        "Map.centerObject",
        "ui.Chart.feature.byFeature",
        "ui.Chart.setChartType",
        "ui.Chart.setOptions",
        "ee.FeatureCollection.reduceToImage",
        "ee.Reducer.first"
    ],
    "processing step": [
        "Load administrative boundaries for analysis",
        "Filter MODIS burned area data by date and region",
        "Generate binary mask for burned areas",
        "Sum burned area pixels for total count",
        "Calculate total burned area in square kilometers",
        "Aggregate burned pixels and area per city",
        "Visualize burned areas on a map",
        "Create pie chart for city-wise burned area",
        "Generate raster visualization of burned areas",
        "Display application title on map"
    ],
    "output": "**Chart** of city-wise burned area distribution."
}