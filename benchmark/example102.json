{
    "query": "Flood extent analysis",
    "datasource": [
        "Landsat8",
        "Region of interest (vector data)"
    ],
    "raw_code": "//Flood Analysis\n\n// Select study area (Poyang Lake)\nvar studyArea = \n    /* color: #98ff00 */\n    /* displayProperties: [\n      {\n        \"type\": \"rectangle\"\n      }\n    ] */\n    ee.FeatureCollection(\n        [ee.Feature(\n            ee.Geometry.Polygon(\n                [[[115.98888884930852, 29.26911282738686],\n                  [115.98888884930852, 28.73704118280411],\n                  [116.77166472821477, 28.73704118280411],\n                  [116.77166472821477, 29.26911282738686]]], null, false),\n            {\n              \"system:index\": \"0\"\n            })]);\n// Define the LANDSAT ImageCollection\nvar landsatCollection = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2');\n\n\n// Generate images for two periods (Winter / Summer)\nvar winterWater =  landsatCollection\n  .filterDate('2019-01-01', '2019-03-31').min().clip(studyArea)\n  .normalizedDifference(['SR_B5', 'SR_B4']).gt(0.2)\n\nvar summerWater = landsatCollection\n  .filterDate('2019-07-01', '2019-09-30')\n  .min().clip(studyArea)\n  .normalizedDifference(['SR_B5', 'SR_B4']).gt(0.2)\n\n\n// 计算冬季和夏季水体的差异\nvar floodExtent = summerWater.subtract(winterWater);\n\n// 将差异可视化为淹没情况\nMap.centerObject(studyArea, 10);\nMap.addLayer(floodExtent, {palette: ['0000FF', 'FFFFFF'], min: -1, max: 1}, 'Flooded Areas');\n\n// 计算淹没区域的面积\nvar floodArea = floodExtent.multiply(ee.Image.pixelArea()).divide(10000); // 平方千米\nvar statistics = floodArea.reduceRegion({\n  reducer: ee.Reducer.sum(),\n  geometry: studyArea.geometry(),\n  scale: 30, // 分辨率，单位为米\n  maxPixels: 1e13 // 最大像素数\n});\n\n// 打印淹没区域的总面积\nvar floodAreaSqKm = statistics.get('nd');\nprint('淹没区域总面积 (平方千米):', floodAreaSqKm);",
    "api": [
        "ee.FeatureCollection",
        "ee.Feature",
        "ee.Geometry.Polygon",
        "ee.ImageCollection",
        "ee.ImageCollection.filterDate",
        "ee.ImageCollection.min",
        "ee.Image.clip",
        "ee.Image.normalizedDifference",
        "ee.Image.gt",
        "ee.Image.subtract",
        "Map.centerObject",
        "Map.addLayer",
        "ee.Image.multiply",
        "ee.Image.divide",
        "ee.Image.reduceRegion",
        "ee.Reducer.sum",
        "ee.Image.pixelArea",
        "ee.Image.get"
    ],
    "processing step": [
        "Define study area polygon",
        "Load LANDSAT ImageCollection",
        "Filter images for winter period",
        "Calculate winter water index",
        "Filter images for summer period",
        "Calculate summer water index",
        "Compute flood extent difference",
        "Visualize flood extent",
        "Calculate flooded area in sq km",
        "Print total flooded area"
    ],
    "output": "**Map showing flooded areas.**"
}