{
    "query": "Calculate forest loss area",
    "datasource": [
        "Hansen global forest change imagery",
        "Country boundary vector data",
        "Protected areas vector data"
    ],
    "raw_code": "var gfc2014 = ee.Image(\"UMD/hansen/global_forest_change_2015\"),\n    gfc2018 = ee.Image(\"UMD/hansen/global_forest_change_2018_v1_6\");\n\nvar treeCover = gfc2018.select(['treecover2000']);\nvar lossImage = gfc2018.select(['loss']);\nvar gainImage = gfc2018.select(['gain']);\n\nvar countries = ee.FeatureCollection('USDOS/LSIB_SIMPLE/2017');\nvar congo = ee.Feature(\n  countries\n    .filter(ee.Filter.eq('country_na', 'Rep of the Congo'))\n    .first()\n);\n\nvar protectedAreas = ee.FeatureCollection('WCMC/WDPA/current/polygons')\n  .filter(ee.Filter.and(\n    ee.Filter.bounds(congo.geometry()),\n    ee.Filter.neq('IUCN_CAT', 'VI'),\n    ee.Filter.neq('STATUS', 'proposed'),\n    ee.Filter.lt('STATUS_YR', 2018)\n  ))\n  .map(function(feat){\n    return congo.intersection(feat); \n  });\n\nvar lossIn2018 = gfc2018.select(['lossyear']).eq(18);\nvar areaImage = lossIn2018.multiply(ee.Image.pixelArea());\nvar stats = areaImage.reduceRegion({\n  reducer: ee.Reducer.sum(),\n  geometry: congo.geometry(),\n  scale: 30,\n  maxPixels: 1e9\n});\nprint('Area lost in the Congo Republic:',\n  stats.get('lossyear'),\n  'square meters'\n);\nvar stats = areaImage.reduceRegion({\n  reducer: ee.Reducer.sum(),\n  geometry: protectedAreas.geometry(),\n  scale: 30,\n  maxPixels: 1e9\n});\nprint('Area lost in protected areas:',\n  stats.get('lossyear'),\n  'square meters'\n);\n\nMap.setCenter(15.364, -1.294, 6);\nMap.addLayer(lossIn2018.updateMask(lossIn2018).clip(protectedAreas), {palette:['white', 'red']}, 'Area lost in 2018 in protected areas ');\nMap.addLayer(lossIn2018.clip(protectedAreas), {palette:['white', 'red']}, 'Area lost in 2018 in protected areas (with Area Boundaries) ');",
    "api": [
        "ee.Image.select",
        "ee.FeatureCollection.filter",
        "ee.Filter.eq",
        "ee.FeatureCollection.first",
        "ee.Feature.intersection",
        "ee.Filter.and",
        "ee.Filter.neq",
        "ee.Filter.lt",
        "ee.Image.multiply",
        "ee.Image.pixelArea",
        "ee.Reducer.sum",
        "ee.Image.reduceRegion",
        "ee.Geometry.geometry",
        "Map.setCenter",
        "Map.addLayer",
        "ee.Image.updateMask",
        "ee.Image.clip"
    ],
    "processing step": [
        "Load Hansen forest change datasets for two years.",
        "Select tree cover, loss, and gain layers from dataset.",
        "Filter country feature collection for specific country.",
        "Filter protected areas within country bounds and criteria.",
        "Calculate area of forest loss in specific year.",
        "Compute total area of loss within country geometry.",
        "Compute total area of loss within protected areas.",
        "Visualize forest loss areas within protected areas."
    ],
    "output": "Map showing forest loss in protected areas."
}